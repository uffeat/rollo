<style name="sheet">
  [path="/pages/boom.x.html"] {
    h1 {
      color: pink;
    }
  }
</style>

<script type="module">
  const { component } = await use("@/component");
  const { layout } = await use("@/layout/");
  const { ref, reactive } = await use("@/state");

  const state = ref({ name: "mode" });
  const page = component.main("container", component.h1({ text: "BOOM!" }));
  page.attribute.path = __path__;

  state.effects.add(
    () => {
      layout.clear(":not([slot])");
      layout.append(page);
    },
    { run: false },
    ["enter"]
  );

  state.effects.add(
    () => {
      page.remove();
    },
    { run: false },
    ["exit"]
  );

  export default function () {
    this.assets.sheet.use();

    return (mode, query, ...args) => {
      state(Object.keys(mode)[0]);
    };
  }
</script>
