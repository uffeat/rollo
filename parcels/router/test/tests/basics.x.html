<!--
/basics.x.html
-->
<style name="sheet"></style>

<script type="module">
  const { component } = await use("@/component");
  const { layout } = await use("@/layout/");
  const { router, NavLink } = await use("@/router/");

  export default async function ({ pages }) {
    this.assets.sheet.use();
    layout.clear();

    /* Define routes */
    router.routes.add(
      Object.fromEntries(
        Object.entries(pages).map(([path, load]) => {
          const route = async (...args) => {
            const mod = await load();
            mod.default(...args);
          };
          return [path, route];
        })
      )
    );

    /* Create nav */
    component.nav(
      "nav.d-flex.flex-column",
      { slot: "side", parent: layout },
      ...[
        ["Home", "/"],
        ["About", "/about"],
        ["Foo", "/foo"],
        ["Foo with args", "/foo/ding/dong"],
        ["Color", "/color"],
        ["Color -> green", "/color/green"],
        ["Bad", "/bad"],
        ["Boom", "/boom"],
      ].map(([text, path]) => NavLink({ text, path }))
    );

    /* Setup */
    await router.setup();
  }
</script>
